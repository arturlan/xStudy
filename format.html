<!DOCTYPE html>
<html>

<head>
    <title>Results</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans|Libre+Franklin" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script>
    $(document).ready(function() {
        $("h3").click(function() {
            var $stext = $(this).next("h5").stop(true, true);
            if ($stext.is(":hidden")) {
                $stext.slideDown(300);
            } else {
                $stext.hide();
            }
        });
    });
    </script>
</head>
<style>
#login {
    text-align: right;
}

#header {
    margin-top: 30px;
}

h1, h5, h3 {font-family: 'Libre Franklin', sans-serif;}
</style>

<body>
    <div class="row" id="header">
        <div class="col-xs-6 col-md-6"></div>
        <div class="col-xs-3 col-md-3"></div>
        <div class="col-xs-2 col-md-2" id="login"><a href="/users/login" style="text-decoration:none">Log In</a></div>
        <div class="col-xs-1 col-md-1" id="signup"><a href="/users/signup" style="text-decoration:none">Sign up</a></div>
    </div>
    <div class="row">
        <div class="col-xs-1 col-md-3"></div>
        <div class="col-xs-10 col-md-6" id="logo"><img src="/images/logo.png" class="img-responsive center-block"></div>
        <div class="col-xs-1 col-md-3"></div>
    </div>
    <div class="row">
        <div class="col-xs-1 col-md-3"></div>
        <div class="col-xs-10 col-md-6">
            <form name="test" method="post" action="/">
                <input type="text" class="form-control" placeholder="Text input" name="query">
            </form>
        </div>
        <div class="col-xs-1 col-md-3"></div>
    </div>
    <div class="row">
        <div class="col-xs-1 col-md-3"></div>
        <div class="col-xs-10 col-md-6">
            <p>
                <h1>All possible answers:</h1>
                <h3>Passing functions and variables as arguments to map() in Javascript/React</h3>
                <h5 style="display:none">
                    <p>In fact, the simplest way for <code>renderCountry/renderCity</code> to call <code>onChange()</code> with <code>checkArea</code> action is to put them inside <code>AreasComponent</code> (i.e. as member functions). So they can access both <code>onChange</code> and <code>checkArea</code>.</p>
                    <pre><code>class AreasComponent extends Component {
    constructor(props) {
        super(props);
        this.state = {};
        this.onChange = this.onChange.bind(this);
    }

    componentWillMount() {
        this.props.fetchAllAreas();
    }

    onChange(e, type) {
        console.log('checkbox verified:', this.props.verified);
        // call checkArea() here with your parameters
        this.props.checkArea(type);
    }

    renderCities(cities) {
        return (
            &lt;div&gt;
                &lt;label&gt;
                    &lt;input
                        onChange={e =&gt; this.onChange(e, 'city')}
                        type="checkbox"/&gt;
                    {cities.name}
                &lt;/label&gt;
            &lt;/div&gt;
        );
    };

    renderCountries(country) {
        console.log("came to country");
        return (
            &lt;div className="city-location"&gt;
                &lt;label&gt;
                    &lt;input
                        onChange={e =&gt; this.onChange(e, 'country')}
                        type="checkbox"/&gt;
                    {country.name}
                &lt;/label&gt;
                {
                    country.cities.map(this.renderCities)
                }
            &lt;/div&gt;
        );
    };

    renderContinents(continent) {
        console.log("came to continent");
        return(
            &lt;div className="continent-location"&gt;
                &lt;label&gt;
                    &lt;input
                        onChange={e =&gt; this.onChange(e, 'continent')}
                        type="checkbox"/&gt;
                    {continent.name}
                &lt;/label&gt;
                {
                    continent.countries.map(this.renderCountries)
                }
            &lt;/div&gt;
        )
    }

    render() {
        if (!this.props.verified || !this.props.areas) {
            return &lt;div&gt;Loading Areas...&lt;/div&gt;
        }
        return(
            &lt;div&gt;
                {
                    this.props.areas.map(this.renderContinents)
                }
            &lt;/div&gt;
        );
    }
}

function mapDispatchToProps(dispatch){
    return bindActionCreators({ fetchAllAreas, checkArea}, dispatch);
}


function mapStateToProps(state) {
    return {
        areas: state.areas.all,
        verified: state.areas.verified
    };
}


export default connect(mapStateToProps, mapDispatchToProps)(AreasComponent);
</code></pre> ,
                    <p>When you <code>.bind</code> parameters, those parameters become the first value(s) passed to the function. You should have noticed that when looking at the <code>console.log</code> output.</p>
                    <p>I.e. when you do</p>
                    <pre><code>var bar = foo.bind(this, x, y);
bar(z);
</code></pre>
                    <p>you get the values in this order:</p>
                    <pre><code>function foo(x, y, z) {}
</code></pre>
                    <p>You have switch the order of parameters in your function:</p>
                    <pre><code>renderContinent(checked, continent) {
  // ...
}
</code></pre>
                    <hr>
                    <p>However, you can just keep the code you have. You don't have to pass the value to <code>renderContinents</code>.</p>
                    <p>In order to pass it to <code>renderContinents</code> etc, either <code>.bind</code> it or put the call inside another function:</p>
                    <pre><code>continent.countries.map(renderCountries.bind(null, verified))
// or
continent.countries.map(country =&gt; renderCountries(country, verified))
</code></pre>
                </h5>
            </p>
        </div>
        <div class="col-xs-1 col-md-3"></div>
    </div>
</body>

</html>
